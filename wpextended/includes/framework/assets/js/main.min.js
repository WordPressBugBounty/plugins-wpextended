!function($,e){var wpext={cache:function(){wpext.els={},wpext.vars={},wpext.els.tab_links=$(".wpext-nav__item-link"),wpext.els.submit_button=$(".wpext-button-submit"),wpext.els.save_tray=$(".wpext__save-tray"),wpext.els.save_tray_button_cancel=$(".wpext__save-tray-button--cancel"),wpext.els.groups=$(".wpext-group"),wpext.els.groupItems=$(".wpext-group__items")},announce:function(e){var t=$(".wpext-live-region");t.length||(t=$('<div class="wpext-live-region" aria-live="polite"></div>').appendTo("body")),t.text(e)},on_ready:function(){void 0===window.Notyf||window.notify||(window.notify={success:function(e){window.Notyf&&(new Notyf).success(e)},error:function(e){window.Notyf&&(new Notyf).error(e)},warning:function(e){window.Notyf&&(new Notyf).open({type:"warning",message:e})},info:function(e){window.Notyf&&(new Notyf).open({type:"info",message:e})}}),this.initialize()},initialize:function(){wpext.cache(),$(".wpext-settings__form form").hide(),wpext.init_modules(),wpext.setup_rest_buttons(),new Promise((function(e){wpext.conditional_fields.init(),e()})).then((function(){wpext.tabs.init(),$(".wpext-settings__form form").fadeIn()}))},init_modules:function(){wpext.trigger_dynamic_fields(),wpext.groups.init(),wpext.watch_submit(),wpext.setup_visual_fields(),wpext.setup_color_picker(),wpext.setup_conditional_descriptions(),wpext.setup_file_uploads(),wpext.importer.init(),wpext.setup_save_tray(),wpext.setup_tables(),setTimeout((function(){wpext.setup_code_editor()}),200)},trigger_dynamic_fields:function(){wpext.setup_timepickers(),wpext.setup_datepickers()},setup_visual_fields:function(){wpext.setup_visual_radio_checkbox_field(),wpext.setup_range_field(),wpext.setup_select2()},setup_select2:function(){$(".wpext-select2").each((function(){var e=$(this),t={};try{t=JSON.parse(e.attr("data-select2-config")||"{}")}catch(e){console.warn("Invalid Select2 configuration:",e)}e.select2(t)}))},groups:{init:function(){wpext.groups.setup_handlers(),wpext.groups.init_existing(),wpext.groups.init_sortable()},setup_handlers:function(){$(e).on("click",".wpext-group__row-add",wpext.groups.add_item_after),$(e).on("click",".wpext-group__row-remove",wpext.groups.remove_item),$(e).on("click",".wpext-group__item-toggle",wpext.groups.toggle_collapse),$(e).on("input change",".wpext-group input, .wpext-group select, .wpext-group textarea",(function(){var e=$(this),t=e.closest(".wpext-group"),i=e.closest(".wpext-group__field-wrapper").closest("li.wpext-group__item");t.length&&i.length&&(clearTimeout(i.data("titleUpdateTimeout")),i.data("titleUpdateTimeout",setTimeout((function(){wpext.groups.update_titles(t,i)}),100)))}))},add_item_after:function(e){e.preventDefault();var t=$(this),i=t.closest(".wpext-group__item"),n=i.closest(".wpext-group"),a=t.data("template"),o=n.find(".wpext-group__items > li:not([id])").length,r=$("#"+a).html();r=(r=r.replace(/\[0\]/g,"["+o+"]")).replace(/_0_/g,"_"+o+"_");var s=$(r);s.removeClass("template-group-group-test").removeAttr("id").removeAttr("style"),i.after(s),wpext.groups.update_row_numbers(n),wpext.groups.update_input_names(n),wpext.trigger_dynamic_fields(),wpext.conditional_fields.check_conditions(n),wpext.groups.update_titles(n)},remove_item:function(e){e.preventDefault();var t=$(this).closest(".wpext-group__item"),i=t.closest(".wpext-group"),n=t.parent(".wpext-group__items"),a=i.data("groupId"),o="template-group-"+a;if(confirm("Are you sure you want to delete this item?"))if(t.remove(),0!==n.children().length||n.is(i.children(".wpext-group__items"))||n.remove(),0===i.find("> .wpext-group__items").children().length){var r=$("#"+o);if(r.length){var s=r.html(),l=$(s);l.removeClass("template-group-"+a).removeAttr("id").removeAttr("style"),i.find("> .wpext-group__items").append(l),wpext.groups.update_row_numbers(i),wpext.groups.update_input_names(i),wpext.trigger_dynamic_fields(),wpext.conditional_fields.check_conditions(i),i.find("input:first").trigger("change"),wpext.announce("Last item removed, default template added")}else console.error("Template not found:",o)}else wpext.groups.update_row_numbers(i),wpext.groups.update_input_names(i),wpext.conditional_fields.check_conditions(i),i.find("input:first").trigger("change"),wpext.groups.update_titles(i),wpext.announce("Item removed")},toggle_collapse:function(e){e.preventDefault();var t=$(this),i=t.closest(".wpext-group__item"),n=i.find("> .wpext-group__item-wrapper > .wpext-group__item-content").first(),a=i.hasClass("wpext-group__item--collapsed");i.toggleClass("wpext-group__item--collapsed",!a),t.attr("aria-expanded",a),a?(n.slideDown(300,(function(){$(this).find(".wpext-select2").each((function(){var e=$(this);if(!e.hasClass("select2-hidden-accessible")){var t={};try{t=JSON.parse(e.attr("data-select2-config")||"{}")}catch(e){console.warn("Invalid Select2 configuration:",e)}e.select2(t)}}))})),wpext.announce("Item expanded")):(n.slideUp(300),wpext.announce("Item collapsed"))},init_sortable:function(){$.fn.sortable&&$(".wpext-group__items").each((function(){var e=$(this),t=e.closest(".wpext-group");if(t.data("sortable")){var i=parseInt(t.data("max-depth")||0),n=t.data("current-depth");window.console&&console.log&&console.log("Group sortable config:",{groupId:t.attr("id"),maxDepth:i,currentDepthOnly:n,sortable:t.data("sortable")}),e.data("uiSortable")&&e.sortable("destroy"),e.sortable({handle:".wpext-group__item-drag",items:"> li",cursor:"move",placeholder:"wpext-group__item-placeholder wpext-group__item-placeholder--active",forcePlaceholderSize:!0,tolerance:"pointer",distance:2,scroll:!0,scrollSensitivity:100,scrollSpeed:100,connectWith:i>0&&!n&&".wpext-group__items",helper:function(e,t){var i=t.clone();return i.css({width:t.width(),height:t.height(),opacity:.9}),i.addClass("wpext-group__item--dragging"),i},start:function(t,i){var a=i.item,o=a.outerHeight();if(i.placeholder.height(o),e.addClass("wpext-group__items--dragging"),a.addClass("wpext-group__item--dragging"),a.data("originalContainer",a.parent()),n){var r=a.parent(".wpext-group__items");a.data("originalParentContainer",r);var s=a.parents(".wpext-group__items").length-1;a.data("originalDepth",s)}var l=a.children("ul.wpext-group__items");if(l.length){var p=l.find("> li");a.data("hasChildren",!0),a.data("children",p),p.hide(),i.placeholder.height(o)}else a.data("hasChildren",!1)},stop:function(t,i){var n=i.item;e.removeClass("wpext-group__items--dragging"),n.removeClass("wpext-group__item--dragging"),n.data("hasChildren")&&n.data("children").show(),$(".wpext-group__items").each((function(){var t=$(this);t.children("li").length||t.is(e)||t.remove()}))},sort:function(a,o){if(i>0){var r=o.item,s=o.placeholder,l=s.parent(".wpext-group__items"),p=s.parents(".wpext-group__items").length-1;if(n){var c,d=r.data("originalParentContainer"),u=s.parent(".wpext-group__items"),f=r.data("originalDepth");return p=s.parents(".wpext-group__items").length-1,window.console&&console.log&&console.log("Current depth restriction check:",{originalDepth:f,currentDepth:p,originalParentContainer:d.length,currentParentContainer:u.length,isSameContainer:d&&u.is(d)}),d&&!u.is(d)?(s.appendTo(d),s.height(o.helper.outerHeight()),void(window.console&&console.log&&console.log("Prevented move to different parent container"))):void 0!==f&&p!==f?((c=r.data("originalContainer"))&&(s.appendTo(c),s.height(o.helper.outerHeight())),void(window.console&&console.log&&console.log("Prevented move to different depth level"))):(c=r.data("originalContainer"))&&!s.parent().is(c)?(s.appendTo(c),s.height(o.helper.outerHeight()),void(window.console&&console.log&&console.log("Prevented move to different parent level"))):void(window.console&&console.log&&console.log("Allowing move within same depth level"))}var g=t.find("> .wpext-group__items").offset().left,h=(a.pageX-g)/50,m=Math.floor(h),_=h-m;.3>_?m=Math.max(0,m-1):_>.7&&(m=Math.min(i,m+1)),m=Math.max(0,Math.min(m,i));var w=s.prev("li:not(.ui-sortable-helper)");if(m>0&&i>p){if(w.length){var v=w.children("ul.wpext-group__items");if(!v.length&&m>p){var x=w.find(".wpext-group__item-wrapper").first();x.length&&((v=$('<ul class="wpext-group__items ui-sortable"/>')).insertAfter(x),v.sortable(e.sortable("option")),v.sortable("option","connectWith",".wpext-group__items"))}v&&v.length&&(s.parent().is(v)||(s.appendTo(v),s.height(o.helper.outerHeight())))}}else if(p>m){for(var b=p-m,y=l,C=l,k=0;b>k;k++){var T=y.parent("li").parent(".wpext-group__items");if(!T.length)break;y=T}if(y.length){var P=s.closest("li").parentsUntil(y,"li").last();if(P.length)s.insertAfter(P);else{var F=y.closest("li");F.length?s.insertAfter(F):s.appendTo(y)}s.height(o.helper.outerHeight()),0===C.children("li").length&&C.fadeOut(100,(function(){$(this).remove()}))}}}},over:function(e,t){$(e.target).is(".wpext-group__items")?t.placeholder.show():t.placeholder.hide()},receive:function(e,t){var a=t.item.parents(".wpext-group__items").length-1;if(n){var o=t.item.data("originalParentContainer"),r=t.item.parent(".wpext-group__items"),s=t.item.data("originalDepth");if(window.console&&console.log&&console.log("Receive function - current depth check:",{originalDepth:s,currentDepth:a,originalParentContainer:o.length,newParentContainer:r.length,isSameContainer:o&&r.is(o)}),o&&!r.is(o))return window.console&&console.log&&console.log("Cancelling move to different parent container"),t.sender.sortable("cancel"),!1;if(void 0!==s&&a!==s)return window.console&&console.log&&console.log("Cancelling move to different depth level"),t.sender.sortable("cancel"),!1;var l=t.item.data("originalContainer");return l&&!r.is(l)?(window.console&&console.log&&console.log("Cancelling move to different parent"),t.sender.sortable("cancel"),!1):(window.console&&console.log&&console.log("Allowing move within same depth level in receive"),!0)}if(a>i)return t.sender.sortable("cancel"),!1},update:function(t,i){clearTimeout(e.data("updateTimeout")),e.data("updateTimeout",setTimeout((function(){var e=$(t.target).closest(".wpext-group");wpext.groups.update_row_numbers(e),wpext.groups.update_input_names(e),wpext.conditional_fields.check_conditions(e),e.find("input:first").trigger("change")}),150))}})}}))},init_existing:function(){$(".wpext-group").each((function(){wpext.groups.update_row_numbers($(this)),wpext.conditional_fields.check_conditions($(this))}))},update_row_numbers:function(e){e.find(".wpext-group__row-index span").each((function(e){$(this).text(e+1)}))},update_input_names:function(e){var t=e.data("groupKey");if(!t){var i=e.find("input").first();t=i.length?i.attr("name").match(/\[(.*?)\]/)[1]:"",e.data("groupKey",t)}!function e(i,n){var a=0;i.children("li").each((function(){var i,o=$(this);i=n?n+"[children]["+a+"]":"["+a+"]",o.find("input, select, textarea").each((function(){var e=$(this),n=e.attr("name");if(n){var a=n.match(/\[([^\]]+)\]$/);if(a){var o=a[1],r=n.substring(0,n.indexOf("["+t+"]")+t.length+2)+i+"["+o+"]";e.attr("name",r)}}}));var r=o.children("ul.wpext-group__items");r.length&&e(r,i),a++}))}(e.children(".wpext-group__items"),""),wpext.groups.update_titles(e),e.find("input:first").trigger("change")},update_titles:function(e,t){var i=e.data("titleTemplate")||"Item {#}";t&&t.length?wpext.groups.update_single_item_title(t,i):function e(t){t.children("li").each((function(){var t=$(this);wpext.groups.update_single_item_title(t,i);var n=t.children("ul.wpext-group__items");n.length&&e(n)}))}(e.find(".wpext-group__items"))},update_single_item_title:function(e,t){var i=e.find(".wpext-group__item-title").first();if(i.length){var n={};e.find("> .wpext-group__item-wrapper > .wpext-group__item-content > .wpext-group__field-wrapper > .wpext-field input, > .wpext-group__item-wrapper > .wpext-group__item-content > .wpext-group__field-wrapper > .wpext-field select, > .wpext-group__item-wrapper > .wpext-group__item-content > .wpext-group__field-wrapper > .wpext-field textarea").each((function(){var e=$(this),t=e.attr("name");if(t){var i=t.match(/\[([^\]]+)\]$/);if(i){var a=i[1],o=e.val()||"";n[a]=o}}}));var a=wpext.groups.process_title_template(t,n);i.html(a)}},process_title_template:function(e,t){var i=e;if(t&&"object"==typeof t)for(var n in t)if(t.hasOwnProperty(n)){var a="{"+n+"}",o=t[n]||"";""===o&&-1!==e.indexOf(a)&&(o="Untitled"),i=i.replace(RegExp(a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),o)}return i}},conditional_fields:{init:function(){this.check_all_conditions(!0),this.setup_handlers(),this.check_all_conditions(!0)},setup_handlers:function(){var t;$(e).on("change input","select, input, textarea",(function(){var e=$(this),i=e.closest(".wpext-group__item"),n=e.closest(".wpext-field");clearTimeout(t),e.is(":checkbox")?(i.length?wpext.conditional_fields.check_conditions(i,!0):n.length&&wpext.conditional_fields.check_conditions(n.parent(),!0),wpext.conditional_fields.check_all_conditions(!0)):t=setTimeout((()=>{i.length?wpext.conditional_fields.check_conditions(i):n.length&&wpext.conditional_fields.check_conditions(n.parent())}),100)})),$(e).on("wpext_tab_changed",(function(e,t){wpext.conditional_fields.check_all_conditions(!0)}))},check_all_conditions:function(e){$(".wpext-field").each((function(){$(this).closest(".wpext-group").length||wpext.conditional_fields.check_conditions($(this).parent(),e)})),$(".wpext-group__item").each((function(){wpext.conditional_fields.check_conditions($(this),e)})),wpext.conditional_fields.check_conditions($("body"),e)},check_conditions:function(e,t){e.find('[class*="show-if-"], .show-if').each((function(){var i=$(this),n=!0,a=i.attr("class").split(" ").filter((function(e){return 0===e.indexOf("show-if-")||"show-if"===e}));if(a.length){var o=i.closest(".wpext-group__item"),r=o.length?o:e;a.forEach((function(e){if("show-if"!==e){var t=wpext.conditional_fields.parse_condition(e);if(t){var i=wpext.conditional_fields.evaluate_condition(r,t);n=n&&i}}}));var s=i;i.hasClass("wpext-nav__item")||i.hasClass("wpext-field")?s=i:i.is("input, select, textarea")?s=i.closest(".wpext-field"):(s=i.closest(".wpext-field")).length||(s=i);var l=!t&&!s.find("[data-no-animation]").length;n?l?s.slideDown(200):s.show():l?s.slideUp(200):s.hide()}}))},parse_condition:function(e){var t=e.replace(/^show-if-?-?/,"").match(/([^=!<>]+)([=!<>]{1,3})(.*)/);return t?{field:t[1],operator:t[2],value:t[3].split("||")}:null},evaluate_condition:function(e,t){var i=e.closest(".wpext-group__item");if(i.length){var n=i.find("input, select, textarea").first().attr("name");if(!n)return!1;var a=n.match(/.*?\[(.*?)\]/);if(!a)return!1;for(var o=a[1],r=['[name*="['+o+"]["+t.field+']"]','[name*="['+o+']"][name*="['+t.field+']"]'],s=null,l=0;l<r.length&&!(s=i.find(r[l])).length;l++);if(!s.length)return!1;var p=this.get_field_value(s,i);return Array.isArray(p)?this.evaluate_array_value(p,t):this.evaluate_single_value(p,t)}for(r=['[name*="['+t.field+']"]','[name="'+t.field+'"]','[id*="'+t.field+'"]'],s=null,l=0;l<r.length&&!(s=e.find(r[l])).length;l++);return!!s.length&&(p=this.get_field_value(s,e),Array.isArray(p)?this.evaluate_array_value(p,t):this.evaluate_single_value(p,t))},get_field_value:function(e,t){if(e.is(":checkbox"))return t.find('input[type="hidden"][name="'+e.attr("name")+'"]'),e.is(":checked")?"1":"0";var i=t.closest(".wpext-group__item");if(i.length){var n=e.attr("name").match(/.*\[([^\]]+)\]/)[1];e=(t=i).find('[name*="['+n+']"]')}return e.is(":radio")?t.find('[name="'+e.attr("name")+'"]:checked').val()||"":e.val()||""},evaluate_array_value:function(e,t){for(var i=0;i<e.length;i++)for(var n=0;n<t.value.length;n++)if(this.compare_values(e[i],t.value[n],t.operator))return!0;return!1},evaluate_single_value:function(e,t){for(var i=0;i<t.value.length;i++)if(this.compare_values(e,t.value[i],t.operator))return!0;return!1},compare_values:function(e,t,i){let n;switch(null==e&&(e=""),null==t&&(t=""),"empty"===t&&(t=""),isNaN(e)||isNaN(t)||(e=+e,t=+t),i){case"===":n=e===t;break;case"!==":n=e!==t;break;case"<":n=t>e;break;case">":n=e>t;break;case">=":n=e>=t;break;case"<=":n=t>=e;break;default:n=!1}return n}},tabs:{init:function(){this.setup_handlers(),this.init_active_tab()},setup_handlers:function(){$(e).on("click",'.wpext-nav[data-type="tabs"] .wpext-nav__item-link',this.handle_tab_click),$(e).on("click",".wpext-internal-link",this.handle_internal_link)},init_active_tab:function(){var e=this.get_tab_id();if(e){var t=$('.wpext-nav[data-type="tabs"] .wpext-nav__item-link[href="'+e+'"]'),i=t.parent(),n=$(e);if(t.length&&i.is(":visible")&&n.length)return void this.activate_tab(e)}this.activate_first_visible_tab()},get_tab_id:function(){if(window.location.hash){var e=window.location.hash;if($(`.wpext-nav[data-type="tabs"] .wpext-nav__item-link[href="${e}"]`).length)return e}var t=$('input[name="option_page"]').val(),i=t?t+"_wpext_tab_id":"wpext_tab_id";return"undefined"!=typeof Storage?localStorage.getItem(i):null},activate_first_visible_tab:function(){var e=$('.wpext-nav[data-type="tabs"] .wpext-nav__item:visible').first();if(e.length){var t=e.find("a").attr("href");$(t).length&&this.activate_tab(t)}},handle_tab_click:function(e){e.preventDefault();var t=$(this).attr("href");wpext.tabs.activate_tab(t)},handle_internal_link:function(e){e.preventDefault();var t=$(this).attr("href");if(0===t.indexOf("#tab-"))a=(n=t.split("|"))[0],o=n[1],wpext.tabs.activate_tab(a),o&&wpext.tabs.scroll_to_element(o);else{var i=t.indexOf("#tab-");if(-1!==i&&window.location.href.split("#")[0]===t.split("#")[0]){var n,a=(n=t.substring(i).split("|"))[0],o=n[1];return wpext.tabs.activate_tab(a),void(o&&wpext.tabs.scroll_to_element(o))}window.location.href=t}},activate_tab:function(t){var i=$(t),n=$('.wpext-nav[data-type="tabs"] .wpext-nav__item-link[href="'+t+'"]'),a=n.parent();i.length&&n.length&&a.is(":visible")?(this.update_tab_visibility(i,a),this.store_tab_id(t),$(e).trigger("wpext_tab_changed",[t]),setTimeout((function(){wpext.conditional_fields.check_all_conditions()}),100)):this.activate_first_visible_tab()},is_valid_tab:function(e,t){return e.length>0&&t.is(":visible")},update_tab_visibility:function(e,t){$('.wpext-nav[data-type="tabs"] .wpext-nav__item').removeClass("wpext-nav__item--active"),t.addClass("wpext-nav__item--active"),$(".wpext-tab").removeClass("wpext-tab--active").hide(),e.addClass("wpext-tab--active").show()},store_tab_id:function(e){if("undefined"!=typeof Storage){var t=$('input[name="option_page"]').val(),i=t?t+"_wpext_tab_id":"wpext_tab_id";localStorage.setItem(i,e)}},scroll_to_element:function(e){$("html, body").animate({scrollTop:$("#"+e).offset().top-100},"fast")}},setup_save_tray:function(){var e=$("form"),t=wpext.els.save_tray,i=e.serialize(),n=$("body").hasClass("toplevel_page_wpextended"),a=wpext_framework?.save_tray_exclusions||[];n||(wpext.checkForChanges=function(){var n=e.serialize(),a=i!==n;t.toggleClass("wpext__save-tray--active",a)},e.on("change input","input, select, textarea",(function(){var e=$(this);a.some((function(t){if(t.startsWith("#")||t.startsWith("."))return e.is(t);var i=e.attr("name");return i&&i.match(RegExp(t))}))||wpext.checkForChanges()})),wpext.els.save_tray_button_cancel.on("click",(function(e){e.preventDefault(),window.location.reload()})))},setup_visual_radio_checkbox_field:function(){$(".wpext-visual-field input").on("change",(function(){var e=$(this),t=e.closest(".wpext-visual-field__item"),i=t.siblings();e.is(":radio")&&i.removeClass("wpext-visual-field__item--checked"),t.toggleClass("wpext-visual-field__item--checked",e.is(":checked"))}))},setup_range_field:function(){$(".wpext-range-field").on("input",(function(){$(this).next(".wpext-range-value").text($(this).val())}))},setup_timepickers:function(){$(".timepicker").not(".hasTimepicker").each((function(){var e=$(this).data("timepicker")||{};$(this).timepicker(e).addClass("hasTimepicker")}))},setup_datepickers:function(){$(".datepicker").not(".hasDatepicker").each((function(){var e=$(this).data("datepicker")||{};$(this).datepicker(e)}))},setup_color_picker:function(){"undefined"!=typeof Coloris&&Coloris({el:".wpext-color-field input",theme:"pill",swatches:["#264653","#2a9d8f","#e9c46a","rgb(244,162,97)","#e76f51","#d62828","navy","#07b","#0096c7","#00b4d880","rgba(0,119,182,0.8)"],onChange:function(e){this.dispatchEvent(new Event("change",{bubbles:!0}))}})},importer:{init:function(){this.setup_handlers()},setup_handlers:function(){$(".wpext-import__button").on("click",(function(){$(this).prev(".wpext-import__file_field").trigger("click")})),$(".wpext-import__file_field").on("change",this.handle_file_select)},handle_file_select:function(e){var t=$(this),i=t.next(".wpext-import__button").next(".spinner"),n=e.target.files[0];if(n)if("application/json"===n.type){var a=new FileReader;a.onload=function(e){wpext.importer.import_settings(e.target.result,t,i)},a.readAsText(n)}else alert(wpextended_vars.invalid_file);else alert(wpextended_vars.select_file)},import_settings:function(e,t,i){var n={action:"wpext_import_settings",_wpnonce:t.siblings(".wpextended\\/import_nonce").val(),option_group:t.siblings(".wpextended\\/import_option_group").val(),settings:e};i.addClass("is-active"),$.post(ajaxurl,n,(function(e){i.removeClass("is-active"),e.success?window.location.reload():alert(wpextended_vars.something_went_wrong)}))}},setup_tables:function(){$(".wpext-table-container").each((function(){var e=$(this),t=e.attr("id"),i=e.data("config");if(i){var n;try{n="string"==typeof i?JSON.parse(i):i}catch(e){return void console.error("Error parsing table configuration:",e)}var a=e.html();e.empty();try{const i={columns:n.columns.map((e=>"string"==typeof e.formatter&&window[e.formatter]?{...e,formatter:(t,i)=>window[e.formatter](t,i)}:e)),data:n.data||[],search:!!n.search&&{enabled:!0,placeholder:"Search...",server:{url:(e,t)=>{const i=new URL(e);return i.searchParams.set("search",t),i.toString()}}},pagination:{enabled:!0,limit:n.per_page||10,server:{url:(e,t,i)=>{const n=new URL(e);return n.searchParams.set("page",t+1),n.searchParams.set("per_page",i),n.toString()}}},sort:!!n.sort&&{multiColumn:!1,server:{url:(e,t)=>{if(!t.length)return e;const i=t[0],a=1===i.direction?"asc":"desc",o=n.columns[i.index].id,r=new URL(e);return r.searchParams.set("sort",o),r.searchParams.set("order",a),r.toString()}}},server:{url:n.endpoint,headers:{"X-WP-Nonce":wpext_framework.nonce,"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"},then:e=>{const t=Array.isArray(e)?e:e.results||e.data||[];return e.total||e.total_pages||t.length,t.map((e=>n.columns.map((t=>{const i=t.id.split(".").reduce(((e,t)=>e&&e[t]),e);return void 0!==i?i:""}))))},total:e=>parseInt(e.total||e.total_pages||(Array.isArray(e)?e.length:0),10),handle:e=>{if(!e.ok)throw Error("HTTP error! status: "+e.status);const t=e.headers.get("X-WP-Total"),i=e.headers.get("X-WP-TotalPages");return e.json().then((e=>(t&&(e.total=parseInt(t,10)),i&&(e.total_pages=parseInt(i,10)),e)))},error:e=>(console.error("Grid.js server error:",e),{results:[],total:0})},className:n.className||{table:"wpext-table",thead:"wpext-table-head",tbody:"wpext-table-body",th:"wpext-table-header",td:"wpext-table-cell",search:"wpext-table-search",pagination:"wpext-table-pagination"},language:{loading:"Loading...",error:"An error occurred while fetching the data",noRecordsFound:"No records found",search:"Search...",pagination:{showing:"Showing",to:"to",of:"of",results:"results",pages:"pages"}}},a=new gridjs.Grid(i);t&&(window.wpextTables=window.wpextTables||{},window.wpextTables[t]=a),a.render(e[0]),setTimeout((()=>{const t=e=>{const t=$(e.target),i=t.closest("[data-rest-endpoint]").length,n=t.closest("[data-allow-default]").length;if(!i&&!n)return e.preventDefault(),e.stopPropagation(),!1};e.on("submit","form",t),e.on("click","button, a",t),e.on("keypress","input",(e=>{13===e.which&&t(e)})),e.on("click",".gridjs-pagination button, .gridjs-th, .gridjs-search button, .gridjs-td, .gridjs-pagination, .gridjs-search, .gridjs-wrapper",(e=>(e.preventDefault(),e.stopPropagation(),!1))),e.on("submit",".gridjs-search form",(e=>(e.preventDefault(),e.stopPropagation(),!1)))}),100)}catch(t){console.error("Error initializing Grid.js table:",t),e.html(a)}}else console.warn("No configuration found for table:",t)}))},watch_submit:function(){$("form").on("submit",(function(){wpext.els.submit_button.prop("disabled",!0)}))},setup_rest_buttons:function(){$(e).on("click","[data-rest-endpoint]",(function(e){e.preventDefault(),e.stopPropagation();var t=$(this),i=t.data("rest-endpoint"),n=t.data("rest-method")||"GET",a=t.data("rest-confirm"),o=t.data("rest-success")||wpext_framework.i18n?.success||"Operation completed successfully",r=t.data("rest-error")||wpext_framework.i18n?.error||"An error occurred",s=t.data("rest-reload-table"),l=t.text();return a&&!confirm(a)||(t.prop("disabled",!0),void 0!==t.data("loading")?t.attr("data-loading","true"):t.text(wpext_framework.i18n?.processing||"Processing..."),fetch(i,{method:n,headers:{"X-WP-Nonce":wpext_framework.nonce,"Content-Type":"application/json"},credentials:"same-origin"}).then((e=>{const t=e.headers.get("content-type"),i=t&&t.includes("application/json");return e.ok?i?e.json():{success:!0}:i?e.json().then((e=>{throw e})):e.text().then((e=>{throw Error(e||r)}))})).then((e=>{try{if(!window.notify||"function"!=typeof window.notify.success)throw Error("Notification system not properly initialized");window.notify.success(o)}catch(e){console.warn("Failed to show notification:",e),alert(o)}s&&window.wpextTables&&window.wpextTables[s]&&window.wpextTables[s].forceRender(),t.prop("disabled",!1),void 0!==t.data("loading")?t.attr("data-loading","false"):t.text(l)})).catch((e=>{try{if(!window.notify||"function"!=typeof window.notify.error)throw Error("Notification system not properly initialized");window.notify.error(e.message||r)}catch(e){console.warn("Failed to show notification:",e),alert(e.message||r)}t.prop("disabled",!1),void 0!==t.data("loading")?t.attr("data-loading","false"):t.text(l)}))),!1}))},reload_page:function(e){if(e)if(window.wpextTables&&window.wpextTables[e])try{window.wpextTables[e].forceRender()}catch(e){console.error("Error reloading table:",e),window.location.reload()}else window.location.reload();else window.wpextTables?Object.values(window.wpextTables).forEach((e=>{try{"function"==typeof e.forceRender&&e.forceRender()}catch(e){console.error("Error reloading table:",e)}})):window.location.reload()},setup_code_editor:function(){var e=$("textarea[data-code-editor-settings]");0!==e.length&&e.each((function(){!function(e){var t=JSON.parse(e.attr("data-code-editor-settings"));try{var i=wp.codeEditor.initialize(e.attr("id"),t);if(!i||!i.codemirror||!i.codemirror.refresh)return i;if(i.codemirror){var n=i.codemirror.getValue();i.codemirror.on("change",(function(e,t){var i=e.getValue()!==n;wpext.els.save_tray.toggleClass("wpext__save-tray--active",i)}))}return setTimeout((function(){i.codemirror.refresh();var t=e.next(".CodeMirror");t.length&&(t.css({visibility:"visible",height:"auto"}),setTimeout((function(){i.codemirror.refresh()}),50))}),100),i}catch(e){return null}}($(this))}))},setup_conditional_descriptions:function(){$("select").on("change",(function(){var e=$(this),t=e.val(),i=e.closest(".wpext-field"),n=Array.isArray(t)?t:[t];i.find(".wpext-description[data-value]").each((function(){var e=$(this),t=e.data("value");n.includes(t)?e.removeClass("wpext-hide-description"):e.addClass("wpext-hide-description")}))})).trigger("change")},setup_file_uploads:function(){if("undefined"!=typeof wp&&void 0!==wp.media){var t={},i=wp.media.model.settings.post.id;$(e).on("click",".wpext-file-upload-button",(function(e){e.preventDefault();var n=$(this),a=n.attr("id"),o=n.data("attachment-input"),r=n.data("preview-element"),s=n.data("upload-title")||"Select a file to upload",l=n.data("upload-button-text")||"Use this file",p="true"===n.data("multiple")||!0===n.data("multiple"),c=n.data("mime-types")||null;if(t[a])return t[a].uploader.uploader.param("post_id",0),void t[a].open();wp.media.model.settings.post.id=0;var d={title:s,button:{text:l},multiple:p};c&&c.length>0&&(d.library={type:c}),t[a]=wp.media(d),t[a].on("select",(function(){var e;if((e=p?t[a].state().get("selection").toJSON():[t[a].state().get("selection").first().toJSON()])&&e.length>0){for(var s=[],l=0;l<e.length;l++){var d=e[l];c&&c.length>0&&!wpext.isValidMimeType(d.mime,c)?void 0!==window.notify?window.notify.error('Invalid file type for "'+d.filename+'". Please select files with allowed types: '+c.join(", ")):alert('Invalid file type for "'+d.filename+'". Please select files with allowed types: '+c.join(", ")):s.push(d)}if(0===s.length)return;if(o){var u=$("#"+o),f=u.closest(".wpext-file-field");if(p){var g=f.find(".wpext-attachment-template");if(g.length){var h=[];f.find(".wpext-attachment-id:not(.wpext-attachment-template)").each((function(){var e=$(this).val();e&&h.push(parseInt(e))}));for(var m=0;m<s.length;m++){var _=parseInt(s[m].id);if(-1===h.indexOf(_)){var w=g.clone().removeClass("wpext-attachment-template").css("display","").val(_);g.before(w)}}}}else u.val(s[0].id),f.find(".wpext-attachment-id:not(#"+o+")").val("")}if(r){var v=$("#"+r).closest(".wpext-file-preview");if(v.length){var x=[];if(f.find(".wpext-attachment-id:not(.wpext-attachment-template)").each((function(){var e=$(this).val();e&&x.push(parseInt(e))})),p){for(var b=0;b<s.length;b++)if(d=s[b],_=parseInt(d.id),0===v.find('[data-attachment-id="'+_+'"]').length){var y=wpext.createFilePreviewItem(d);y.attr("data-attachment-id",_),v.append(y)}}else wpext.updateMultipleFilePreview(v,s);v.show()}}wpext.triggerFormSave(),n.trigger("wpext:file-selected",{attachments:s,attachmentInput:$("#"+o),previewElement:$("#"+r)})}wp.media.model.settings.post.id=i})),t[a].open()})),$(e).on("click","a.add_media",(function(){wp.media.model.settings.post.id=i})),$(e).on("click",".wpext-file-remove-item",(function(e){e.preventDefault(),wpext.removeFileItem($(this))})),$(e).on("keydown",".wpext-file-remove-item",(function(e){13!==e.keyCode&&32!==e.keyCode||(e.preventDefault(),wpext.removeFileItem($(this)))})),wpext.initializeExistingFilePreviews()}else console.warn("WordPress media library not available")},isValidImageUrl:function(e){if(!e||"string"!=typeof e)return!1;try{new URL(e)}catch(e){return!1}return/\.(jpg|jpeg|png|gif|bmp|svg|webp)(\?.*)?$/i.test(e)},getFilenameFromUrl:function(e){if(!e||"string"!=typeof e)return"";try{var t=new URL(e).pathname.split("/").pop();return decodeURIComponent(t)}catch(e){return""}},getFileExtension:function(e){if(!e||"string"!=typeof e)return"";var t=e.split(".");return t.length>1?t.pop().toLowerCase():""},getMimeTypeFromUrl:function(e){if(!e||"string"!=typeof e)return"";var t=wpext.getFilenameFromUrl(e);return{jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",gif:"image/gif",webp:"image/webp",svg:"image/svg+xml",bmp:"image/bmp",ico:"image/x-icon",pdf:"application/pdf",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",xls:"application/vnd.ms-excel",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",ppt:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",txt:"text/plain",rtf:"application/rtf",zip:"application/zip",rar:"application/x-rar-compressed","7z":"application/x-7z-compressed",tar:"application/x-tar",gz:"application/gzip",mp3:"audio/mpeg",wav:"audio/wav",ogg:"audio/ogg",flac:"audio/flac",mp4:"video/mp4",avi:"video/x-msvideo",mov:"video/quicktime",wmv:"video/x-ms-wmv",flv:"video/x-flv",webm:"video/webm"}[wpext.getFileExtension(t)]||""},isValidMimeType:function(e,t){return!(e&&t&&Array.isArray(t)&&0!==t.length)||0===(t=t.filter((function(e){return e&&""!==e.trim()}))).length||t.some((function(t){if(e===t)return!0;if(t.endsWith("/*")){var i=t.substring(0,t.length-2);return e.startsWith(i+"/")}return!1}))},triggerFormSave:function(){var e=$('.wpext-framework-form, form[method="post"]').first();e.length&&setTimeout((function(){e.find("input, select, textarea").first().trigger("change")}),100)},initializeExistingFilePreviews:function(){"undefined"!=typeof wp&&void 0!==wp.media?$(".wpext-file-field").each((function(){var e=$(this),t=e.find(".wpext-file-preview");t.empty();var i=[];e.find(".wpext-attachment-id:not(.wpext-attachment-template)").each((function(){var e=$(this).val();e&&""!==e.trim()&&i.push(parseInt(e.trim()))})),i.length>0&&wpext.loadAttachmentPreviews(t,i)})):console.warn("WordPress media library not available for preview initialization")},loadAttachmentPreviews:function(e,t){var i=[],n=0;function a(){i.length>0&&wpext.updateMultipleFilePreview(e,i)}t.forEach((function(e){if(e){var o=wp.media.attachment(e);o.fetch().done((function(){var e=o.toJSON();i.push(e),++n===t.length&&a()})).fail((function(){++n===t.length&&a()}))}}))},removeFileItem:function(e){var t=e.closest(".wpext-file-preview-item"),i=e.closest(".wpext-file-field"),n=e.closest(".wpext-file-preview"),a=t.find(".wpext-file-name").text()||"file";wpext.announce("Removed "+a);var o=t.data("attachment-id");o?i.find(".wpext-attachment-id:not(.wpext-attachment-template)").each((function(){parseInt($(this).val())===parseInt(o)&&$(this).remove()})):i.find(".wpext-attachment-id:not(.wpext-attachment-template)").val(""),t.remove(),0===n.children(".wpext-file-preview-item").length&&n.hide(),wpext.triggerFormSave(),i.trigger("wpext:file-removed",{fileField:i,preview:n})},updateMultipleFilePreview:function(e,t){if(e&&e.length)if(e.empty(),t&&0!==t.length){for(var i=0;i<t.length;i++){var n=t[i],a=wpext.createFilePreviewItem(n);e.append(a)}e.show()}else e.hide()},updateFilePreview:function(e,t,i){if(e&&e.length)if(e.empty(),t&&""!==t.trim()){i||(i={url:t.trim(),filename:wpext.getFilenameFromUrl(t.trim()),mime:wpext.getMimeTypeFromUrl(t.trim())});var n=wpext.createFilePreviewItem(i);e.html(n),e.show()}else e.hide()},createFilePreviewItem:function(e){var t=$('<div class="wpext-file-preview-item">'),i=e.url||"",n=e.filename||e.name||wpext.getFilenameFromUrl(i),a=e.mime||e.type||wpext.getMimeTypeFromUrl(i);e.id&&t.attr("data-attachment-id",e.id);var o=!1;a&&a.startsWith("image/")&&(o=["image/jpeg","image/jpg","image/png","image/gif","image/webp","image/svg+xml","image/bmp"].some((function(e){return a.toLowerCase()===e||0===a.toLowerCase().indexOf(e)})));var r,s=wpext.getFileExtension(n),l=n||"Unknown file",p=s?s.toUpperCase():"FILE";o?(r='<img src="'+i+'" alt="'+(e.alt||n||"Preview image")+'" style="width: 32px; height: 32px; border-radius: 4px; object-fit: cover;" onerror="this.style.display=\'none\'; this.nextElementSibling.style.display=\'flex\';">',r+='<div style="display: none; width: 32px; height: 32px; align-items: center; justify-content: center; color: var(--surface-600);"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="32" height="32" color="currentColor" fill="none"><path d="M13 2.5V3C13 5.82843 13 7.24264 13.8787 8.12132C14.7574 9 16.1716 9 19 9H19.5M20 10.6569V14C20 17.7712 20 19.6569 18.8284 20.8284C17.6569 22 15.7712 22 12 22C8.22876 22 6.34315 22 5.17157 20.8284C4 19.6569 4 17.7712 4 14V9.45584C4 6.21082 4 4.58831 4.88607 3.48933C5.06508 3.26731 5.26731 3.06508 5.48933 2.88607C6.58831 2 8.21082 2 11.4558 2C12.1614 2 12.5141 2 12.8372 2.11401C12.9044 2.13772 12.9702 2.165 13.0345 2.19575C13.3436 2.34355 13.593 2.593 14.0919 3.09188L18.8284 7.82843C19.4065 8.40649 19.6955 8.69552 19.8478 9.06306C20 9.4306 20 9.83935 20 10.6569Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" /></svg></div>'):r='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="32" height="32" color="currentColor" fill="none"><path d="M13 2.5V3C13 5.82843 13 7.24264 13.8787 8.12132C14.7574 9 16.1716 9 19 9H19.5M20 10.6569V14C20 17.7712 20 19.6569 18.8284 20.8284C17.6569 22 15.7712 22 12 22C8.22876 22 6.34315 22 5.17157 20.8284C4 19.6569 4 17.7712 4 14V9.45584C4 6.21082 4 4.58831 4.88607 3.48933C5.06508 3.26731 5.26731 3.06508 5.48933 2.88607C6.58831 2 8.21082 2 11.4558 2C12.1614 2 12.5141 2 12.8372 2.11401C12.9044 2.13772 12.9702 2.165 13.0345 2.19575C13.3436 2.34355 13.593 2.593 14.0919 3.09188L18.8284 7.82843C19.4065 8.40649 19.6955 8.69552 19.8478 9.06306C20 9.4306 20 9.83935 20 10.6569Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" /></svg>';var c=$('<div class="wpext-file-icon-preview"><div class="wpext-file-icon">'+r+'</div><div class="wpext-file-info"><div class="wpext-file-name" title="'+l+'">'+l+'</div><div class="wpext-file-type">'+p+"</div></div></div>");t.append(c);var d=$('<button type="button" class="wpext-file-remove-item" title="Remove file" aria-label="Remove '+l+'">&times;</button>');return t.append(d),t},createFileIconPreview:function(e){var t=e.url||"",i=e.filename||e.name||wpext.getFilenameFromUrl(t),n=wpext.getFileExtension(i),a=i||"Unknown file",o=n?n.toUpperCase():"FILE";return $('<div class="wpext-file-icon-preview"><div class="wpext-file-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="32" height="32" color="currentColor" fill="none"><path d="M13 2.5V3C13 5.82843 13 7.24264 13.8787 8.12132C14.7574 9 16.1716 9 19 9H19.5M20 10.6569V14C20 17.7712 20 19.6569 18.8284 20.8284C17.6569 22 15.7712 22 12 22C8.22876 22 6.34315 22 5.17157 20.8284C4 19.6569 4 17.7712 4 14V9.45584C4 6.21082 4 4.58831 4.88607 3.48933C5.06508 3.26731 5.26731 3.06508 5.48933 2.88607C6.58831 2 8.21082 2 11.4558 2C12.1614 2 12.5141 2 12.8372 2.11401C12.9044 2.13772 12.9702 2.165 13.0345 2.19575C13.3436 2.34355 13.593 2.593 14.0919 3.09188L18.8284 7.82843C19.4065 8.40649 19.6955 8.69552 19.8478 9.06306C20 9.4306 20 9.83935 20 10.6569Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" /></svg></div><div class="wpext-file-info"><div class="wpext-file-name" title="'+a+'">'+a+'</div><div class="wpext-file-type">'+o+"</div></div></div>")}};$(e).ready((function(){wpext.on_ready()}))}(jQuery,document);